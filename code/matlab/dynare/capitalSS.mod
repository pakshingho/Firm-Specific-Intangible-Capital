%----------------------------------------------------------------
% 0. Housekeeping
%----------------------------------------------------------------

close all;

%----------------------------------------------------------------
% 1. Defining variables
%----------------------------------------------------------------

var y k l b z1 z2;
varexo e1 e2;

parameters alpha gamma delta ri r w rho1 rho2 sigma1 sigma2 a c d;

%----------------------------------------------------------------
% 2. Calibration
%----------------------------------------------------------------

alpha   = 0.3;
gamma   = 0.6;
delta   = 0.1;
ri      = 0.025;
r       = 0.03;
w       = 1;
a       = 0.02;
c       = 0.01;
d       = 0.2;
rho1    = 0.95; 
sigma1  = 0.05;
rho2    = 0.9;
sigma2  = 0.1;

%----------------------------------------------------------------
% 3. Model
%----------------------------------------------------------------

model;
    y = k(-1) ^ alpha * (exp(z1) * l) ^ gamma;
    alpha * y(+1) / k = ri + delta;
    w = gamma * y / l;
    (1 + ri) * (1 - 2 * a * (b - b(-1))) + 
                   (- (1 + r) + 2 * a * (b(+1) - b) - 2 * c * (b - d)) = 0;
    z1 = rho1 * z1(-1) + e1;
    z2 = rho2 * z2(-1) + e2;
end;

%----------------------------------------------------------------
% 4. Computation
%----------------------------------------------------------------

steady_state_model;
    k  = 1.54792;
  
    l  = 0.386981;
    y = k ^ alpha * (exp(z1) * l) ^ gamma;
    b =  -0.05;
    z1 = 0;
    z2 = 0;
end;

shocks;
var e1 = sigma1^2;
var e2 = sigma2^2;
end;

steady;
check;

stoch_simul(irf = 50, order = 1);